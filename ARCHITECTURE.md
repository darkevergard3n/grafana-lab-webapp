# ğŸ—ï¸ Architecture Documentation

## Enterprise Order Management System - Deep Dive

This document provides a comprehensive explanation of the system architecture, design decisions, and how each component contributes to observability.

---

## ğŸ“‘ Table of Contents

1. [System Overview](#1-system-overview)
2. [Microservices Architecture](#2-microservices-architecture)
3. [Data Flow Patterns](#3-data-flow-patterns)
4. [Observability Architecture](#4-observability-architecture)
5. [Network Architecture](#5-network-architecture)
6. [Security Considerations](#6-security-considerations)
7. [Scaling Patterns](#7-scaling-patterns)
8. [Technology Choices Explained](#8-technology-choices-explained)

---

## 1. System Overview

### 1.1 High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              INTERNET / USERS                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           WEBAPP SERVER (VM #1)                              â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                        EDGE LAYER                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚                     Traefik (API Gateway)                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ SSL/TLS termination (if configured)                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Path-based routing (/api/orders â†’ order-service)              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Load balancing (round-robin)                                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Rate limiting                                                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Metrics exposure (/metrics)                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Ports: 80 (HTTP), 8080 (Dashboard/Metrics)                      â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      APPLICATION LAYER                                 â”‚ â”‚
â”‚  â”‚                                                                        â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”‚
â”‚  â”‚  â”‚   Order     â”‚ â”‚  Inventory  â”‚ â”‚   Payment   â”‚ â”‚    User     â”‚     â”‚ â”‚
â”‚  â”‚  â”‚   Service   â”‚ â”‚   Service   â”‚ â”‚   Service   â”‚ â”‚   Service   â”‚     â”‚ â”‚
â”‚  â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚     â”‚ â”‚
â”‚  â”‚  â”‚  Language:  â”‚ â”‚  Language:  â”‚ â”‚  Language:  â”‚ â”‚  Language:  â”‚     â”‚ â”‚
â”‚  â”‚  â”‚    Go       â”‚ â”‚   Rust ğŸ¦€   â”‚ â”‚   Python    â”‚ â”‚    Java     â”‚     â”‚ â”‚
â”‚  â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚     â”‚ â”‚
â”‚  â”‚  â”‚ Framework:  â”‚ â”‚ Framework:  â”‚ â”‚ Framework:  â”‚ â”‚ Framework:  â”‚     â”‚ â”‚
â”‚  â”‚  â”‚    Gin      â”‚ â”‚    Axum     â”‚ â”‚   FastAPI   â”‚ â”‚ Spring Boot â”‚     â”‚ â”‚
â”‚  â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚     â”‚ â”‚
â”‚  â”‚  â”‚  Port:8001  â”‚ â”‚  Port:8002  â”‚ â”‚  Port:8003  â”‚ â”‚  Port:8004  â”‚     â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â”‚ â”‚
â”‚  â”‚         â”‚               â”‚               â”‚               â”‚            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚ â”‚
â”‚  â”‚  â”‚ Notificationâ”‚   All services expose:                              â”‚ â”‚
â”‚  â”‚  â”‚   Service   â”‚   â€¢ GET  /health  (liveness probe)                  â”‚ â”‚
â”‚  â”‚  â”‚   Node.js   â”‚   â€¢ GET  /ready   (readiness probe)                 â”‚ â”‚
â”‚  â”‚  â”‚  Port:8005  â”‚   â€¢ GET  /metrics (Prometheus format)               â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â€¢ REST API endpoints                              â”‚ â”‚
â”‚  â”‚         â”‚                                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚            â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         â–¼              DATA LAYER                                    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚ â”‚
â”‚  â”‚  â”‚ PostgreSQL  â”‚ â”‚    Redis    â”‚ â”‚  RabbitMQ   â”‚                    â”‚ â”‚
â”‚  â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚                    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Orders    â”‚ â”‚ â€¢ Sessions  â”‚ â”‚ â€¢ Order     â”‚                    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Users     â”‚ â”‚ â€¢ Cache     â”‚ â”‚   events    â”‚                    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Inventory â”‚ â”‚ â€¢ Rate      â”‚ â”‚ â€¢ Notif     â”‚                    â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Payments  â”‚ â”‚   limiting  â”‚ â”‚   queue     â”‚                    â”‚ â”‚
â”‚  â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚                    â”‚ â”‚
â”‚  â”‚  â”‚ Port: 5432  â”‚ â”‚ Port: 6379  â”‚ â”‚ Port: 5672  â”‚                    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                    â”‚ â”‚
â”‚  â”‚         â”‚               â”‚               â”‚                            â”‚ â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚ â”‚
â”‚  â”‚                         â”‚                                             â”‚ â”‚
â”‚  â”‚                 Exporters (for Prometheus):                           â”‚ â”‚
â”‚  â”‚                 â€¢ postgres_exporter :9187                             â”‚ â”‚
â”‚  â”‚                 â€¢ redis_exporter    :9121                             â”‚ â”‚
â”‚  â”‚                 â€¢ rabbitmq_exporter :9419                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                     OBSERVABILITY AGENTS                            â”‚ â”‚
â”‚  â”‚                                                                     â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚ â”‚
â”‚  â”‚  â”‚ Node Exporterâ”‚ â”‚   cAdvisor   â”‚ â”‚   Promtail   â”‚               â”‚ â”‚
â”‚  â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚               â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ CPU usage  â”‚ â”‚ â€¢ Container  â”‚ â”‚ â€¢ Collects   â”‚               â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Memory     â”‚ â”‚   CPU/mem    â”‚ â”‚   logs from  â”‚               â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Disk I/O   â”‚ â”‚ â€¢ Network    â”‚ â”‚   all        â”‚               â”‚ â”‚
â”‚  â”‚  â”‚ â€¢ Network    â”‚ â”‚ â€¢ Disk I/O   â”‚ â”‚   containers â”‚               â”‚ â”‚
â”‚  â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚               â”‚ â”‚
â”‚  â”‚  â”‚ Port: 9100   â”‚ â”‚ Port: 8081   â”‚ â”‚ â†’ Loki       â”‚               â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚ Metrics (pull)
                                       â”‚ Logs (push)
                                       â”‚ Traces (push)
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          GRAFANA STACK (VM #2)                               â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         DATA COLLECTION                                â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚  â”‚  Prometheus  â”‚     â”‚     Loki     â”‚     â”‚    Tempo     â”‚          â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚              â”‚          â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Scrapes    â”‚     â”‚ â€¢ Receives   â”‚     â”‚ â€¢ Receives   â”‚          â”‚  â”‚
â”‚  â”‚  â”‚   /metrics   â”‚     â”‚   logs from  â”‚     â”‚   traces     â”‚          â”‚  â”‚
â”‚  â”‚  â”‚   endpoints  â”‚     â”‚   Promtail   â”‚     â”‚   from OTEL  â”‚          â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Stores     â”‚     â”‚ â€¢ Indexes    â”‚     â”‚ â€¢ Stores     â”‚          â”‚  â”‚
â”‚  â”‚  â”‚   time-seriesâ”‚     â”‚   log data   â”‚     â”‚   spans      â”‚          â”‚  â”‚
â”‚  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚              â”‚          â”‚  â”‚
â”‚  â”‚  â”‚ Port: 9090   â”‚     â”‚ Port: 3100   â”‚     â”‚ Port: 3200   â”‚          â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         VISUALIZATION                                  â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚                        Grafana                                  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Unified dashboards for metrics, logs, traces                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Pre-built dashboards for each service                        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Alerting and notification channels                           â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Explore mode for ad-hoc queries                              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  Port: 3000                                                     â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                     â”‚  â”‚
â”‚  â”‚  â”‚ Alertmanager â”‚  Routes alerts to:                                  â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â€¢ Email, Slack, PagerDuty, etc.                    â”‚  â”‚
â”‚  â”‚  â”‚ Port: 9093   â”‚                                                     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Design Principles

| Principle | Implementation |
|-----------|----------------|
| **Separation of Concerns** | Each microservice handles one domain |
| **Loose Coupling** | Services communicate via REST/async messaging |
| **Observable by Default** | Every service exposes `/metrics`, structured logs |
| **Fail Fast** | Health checks, circuit breakers |
| **Infrastructure as Code** | Docker Compose, config files |

---

## 2. Microservices Architecture

### 2.1 Service Responsibilities

#### Order Service (Go)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ORDER SERVICE                             â”‚
â”‚                           (Go/Gin)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  RESPONSIBILITIES:                                               â”‚
â”‚  â”œâ”€â”€ Create new orders                                           â”‚
â”‚  â”œâ”€â”€ Update order status (pending â†’ processing â†’ shipped)       â”‚
â”‚  â”œâ”€â”€ List/search orders with pagination                          â”‚
â”‚  â”œâ”€â”€ Order workflow orchestration                                â”‚
â”‚  â””â”€â”€ Emit order events to message queue                          â”‚
â”‚                                                                  â”‚
â”‚  ENDPOINTS:                                                      â”‚
â”‚  â”œâ”€â”€ GET    /api/v1/orders          - List all orders           â”‚
â”‚  â”œâ”€â”€ GET    /api/v1/orders/:id      - Get single order          â”‚
â”‚  â”œâ”€â”€ POST   /api/v1/orders          - Create order              â”‚
â”‚  â”œâ”€â”€ PUT    /api/v1/orders/:id      - Update order              â”‚
â”‚  â”œâ”€â”€ DELETE /api/v1/orders/:id      - Cancel order              â”‚
â”‚  â”œâ”€â”€ GET    /health                 - Liveness check            â”‚
â”‚  â”œâ”€â”€ GET    /ready                  - Readiness check           â”‚
â”‚  â””â”€â”€ GET    /metrics                - Prometheus metrics        â”‚
â”‚                                                                  â”‚
â”‚  METRICS EXPOSED:                                                â”‚
â”‚  â”œâ”€â”€ http_requests_total{method, endpoint, status}              â”‚
â”‚  â”œâ”€â”€ http_request_duration_seconds{method, endpoint}            â”‚
â”‚  â”œâ”€â”€ orders_created_total                                        â”‚
â”‚  â”œâ”€â”€ orders_by_status{status}                                    â”‚
â”‚  â””â”€â”€ order_processing_duration_seconds                           â”‚
â”‚                                                                  â”‚
â”‚  DEPENDENCIES:                                                   â”‚
â”‚  â”œâ”€â”€ PostgreSQL (orders table)                                   â”‚
â”‚  â”œâ”€â”€ Redis (caching)                                             â”‚
â”‚  â”œâ”€â”€ Inventory Service (stock check)                             â”‚
â”‚  â”œâ”€â”€ Payment Service (payment processing)                        â”‚
â”‚  â””â”€â”€ RabbitMQ (event publishing)                                 â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Inventory Service (Rust ğŸ¦€)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      INVENTORY SERVICE                           â”‚
â”‚                        (Rust/Axum)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  WHY RUST?                                                       â”‚
â”‚  â”œâ”€â”€ High-throughput stock operations                            â”‚
â”‚  â”œâ”€â”€ Concurrent access without data races                        â”‚
â”‚  â”œâ”€â”€ Memory safety for financial data                            â”‚
â”‚  â””â”€â”€ Low latency for real-time inventory checks                  â”‚
â”‚                                                                  â”‚
â”‚  RESPONSIBILITIES:                                               â”‚
â”‚  â”œâ”€â”€ Track stock levels by SKU and warehouse                     â”‚
â”‚  â”œâ”€â”€ Reserve stock for pending orders                            â”‚
â”‚  â”œâ”€â”€ Release stock for cancelled orders                          â”‚
â”‚  â”œâ”€â”€ Low stock alerts                                            â”‚
â”‚  â””â”€â”€ Stock movement history                                      â”‚
â”‚                                                                  â”‚
â”‚  ENDPOINTS:                                                      â”‚
â”‚  â”œâ”€â”€ GET    /api/v1/inventory             - List all stock      â”‚
â”‚  â”œâ”€â”€ GET    /api/v1/inventory/:sku        - Get item stock      â”‚
â”‚  â”œâ”€â”€ POST   /api/v1/inventory/reserve     - Reserve stock       â”‚
â”‚  â”œâ”€â”€ POST   /api/v1/inventory/release     - Release stock       â”‚
â”‚  â”œâ”€â”€ POST   /api/v1/inventory/adjust      - Manual adjustment   â”‚
â”‚  â”œâ”€â”€ GET    /api/v1/inventory/alerts      - Low stock items     â”‚
â”‚  â”œâ”€â”€ GET    /health                       - Liveness check      â”‚
â”‚  â”œâ”€â”€ GET    /ready                        - Readiness check     â”‚
â”‚  â””â”€â”€ GET    /metrics                      - Prometheus metrics  â”‚
â”‚                                                                  â”‚
â”‚  METRICS EXPOSED:                                                â”‚
â”‚  â”œâ”€â”€ http_requests_total{method, endpoint, status}              â”‚
â”‚  â”œâ”€â”€ http_request_duration_seconds{method, endpoint}            â”‚
â”‚  â”œâ”€â”€ inventory_stock_level{sku, warehouse}                      â”‚
â”‚  â”œâ”€â”€ inventory_reservations_total                                â”‚
â”‚  â”œâ”€â”€ inventory_low_stock_items                                   â”‚
â”‚  â””â”€â”€ inventory_operations_duration_seconds{operation}            â”‚
â”‚                                                                  â”‚
â”‚  DEPENDENCIES:                                                   â”‚
â”‚  â”œâ”€â”€ PostgreSQL (inventory table)                                â”‚
â”‚  â””â”€â”€ Redis (stock level caching)                                 â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Payment Service (Python)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       PAYMENT SERVICE                            â”‚
â”‚                      (Python/FastAPI)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  WHY PYTHON?                                                     â”‚
â”‚  â”œâ”€â”€ Rich ecosystem for payment integrations                     â”‚
â”‚  â”œâ”€â”€ Rapid development for business logic                        â”‚
â”‚  â”œâ”€â”€ Easy async handling with asyncio                            â”‚
â”‚  â””â”€â”€ Common choice for fintech backends                          â”‚
â”‚                                                                  â”‚
â”‚  RESPONSIBILITIES:                                               â”‚
â”‚  â”œâ”€â”€ Process payments (mock gateway)                             â”‚
â”‚  â”œâ”€â”€ Handle refunds                                              â”‚
â”‚  â”œâ”€â”€ Payment status tracking                                     â”‚
â”‚  â”œâ”€â”€ Transaction history                                         â”‚
â”‚  â””â”€â”€ Payment method validation                                   â”‚
â”‚                                                                  â”‚
â”‚  ENDPOINTS:                                                      â”‚
â”‚  â”œâ”€â”€ POST   /api/v1/payments              - Process payment     â”‚
â”‚  â”œâ”€â”€ GET    /api/v1/payments/:id          - Get payment status  â”‚
â”‚  â”œâ”€â”€ POST   /api/v1/payments/:id/refund   - Process refund      â”‚
â”‚  â”œâ”€â”€ GET    /api/v1/payments/order/:id    - Payments by order   â”‚
â”‚  â”œâ”€â”€ GET    /health                       - Liveness check      â”‚
â”‚  â”œâ”€â”€ GET    /ready                        - Readiness check     â”‚
â”‚  â””â”€â”€ GET    /metrics                      - Prometheus metrics  â”‚
â”‚                                                                  â”‚
â”‚  METRICS EXPOSED:                                                â”‚
â”‚  â”œâ”€â”€ http_requests_total{method, endpoint, status}              â”‚
â”‚  â”œâ”€â”€ http_request_duration_seconds{method, endpoint}            â”‚
â”‚  â”œâ”€â”€ payments_processed_total{status, method}                   â”‚
â”‚  â”œâ”€â”€ payment_amount_total{currency}                              â”‚
â”‚  â”œâ”€â”€ refunds_processed_total                                     â”‚
â”‚  â””â”€â”€ payment_gateway_latency_seconds                             â”‚
â”‚                                                                  â”‚
â”‚  DEPENDENCIES:                                                   â”‚
â”‚  â”œâ”€â”€ PostgreSQL (payments table)                                 â”‚
â”‚  â””â”€â”€ Redis (idempotency keys)                                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### User Service (Java)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER SERVICE                              â”‚
â”‚                     (Java/Spring Boot)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  WHY JAVA/SPRING?                                                â”‚
â”‚  â”œâ”€â”€ Enterprise standard for auth systems                        â”‚
â”‚  â”œâ”€â”€ Mature security frameworks (Spring Security)                â”‚
â”‚  â”œâ”€â”€ Common in banking/enterprise                                â”‚
â”‚  â””â”€â”€ Excellent Prometheus integration (Micrometer)               â”‚
â”‚                                                                  â”‚
â”‚  RESPONSIBILITIES:                                               â”‚
â”‚  â”œâ”€â”€ User registration and authentication                        â”‚
â”‚  â”œâ”€â”€ JWT token generation and validation                         â”‚
â”‚  â”œâ”€â”€ Role-based access control (RBAC)                            â”‚
â”‚  â”œâ”€â”€ User profile management                                     â”‚
â”‚  â””â”€â”€ Session management                                          â”‚
â”‚                                                                  â”‚
â”‚  ENDPOINTS:                                                      â”‚
â”‚  â”œâ”€â”€ POST   /api/v1/users/register        - Register user       â”‚
â”‚  â”œâ”€â”€ POST   /api/v1/users/login           - Login (get JWT)     â”‚
â”‚  â”œâ”€â”€ GET    /api/v1/users/me              - Current user        â”‚
â”‚  â”œâ”€â”€ GET    /api/v1/users/:id             - Get user profile    â”‚
â”‚  â”œâ”€â”€ PUT    /api/v1/users/:id             - Update profile      â”‚
â”‚  â”œâ”€â”€ GET    /api/v1/users                 - List users (admin)  â”‚
â”‚  â”œâ”€â”€ GET    /health                       - Liveness check      â”‚
â”‚  â”œâ”€â”€ GET    /ready                        - Readiness check     â”‚
â”‚  â””â”€â”€ GET    /actuator/prometheus          - Prometheus metrics  â”‚
â”‚                                                                  â”‚
â”‚  METRICS EXPOSED:                                                â”‚
â”‚  â”œâ”€â”€ http_server_requests_seconds{method, uri, status}          â”‚
â”‚  â”œâ”€â”€ users_registered_total                                      â”‚
â”‚  â”œâ”€â”€ login_attempts_total{status}                                â”‚
â”‚  â”œâ”€â”€ active_sessions_current                                     â”‚
â”‚  â””â”€â”€ jwt_tokens_issued_total                                     â”‚
â”‚                                                                  â”‚
â”‚  DEPENDENCIES:                                                   â”‚
â”‚  â”œâ”€â”€ PostgreSQL (users table)                                    â”‚
â”‚  â””â”€â”€ Redis (session store)                                       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Notification Service (Node.js)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NOTIFICATION SERVICE                          â”‚
â”‚                     (Node.js/Express)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  WHY NODE.JS?                                                    â”‚
â”‚  â”œâ”€â”€ Excellent for I/O-bound async operations                    â”‚
â”‚  â”œâ”€â”€ Great for WebSocket/real-time features                      â”‚
â”‚  â”œâ”€â”€ NPM ecosystem for email/SMS providers                       â”‚
â”‚  â””â”€â”€ Common for notification workers                             â”‚
â”‚                                                                  â”‚
â”‚  RESPONSIBILITIES:                                               â”‚
â”‚  â”œâ”€â”€ Consume order events from queue                             â”‚
â”‚  â”œâ”€â”€ Send email notifications (mock)                             â”‚
â”‚  â”œâ”€â”€ Send SMS notifications (mock)                               â”‚
â”‚  â”œâ”€â”€ WebSocket for real-time UI updates                          â”‚
â”‚  â””â”€â”€ Notification templates                                      â”‚
â”‚                                                                  â”‚
â”‚  ENDPOINTS:                                                      â”‚
â”‚  â”œâ”€â”€ POST   /api/v1/notifications/send    - Send notification   â”‚
â”‚  â”œâ”€â”€ GET    /api/v1/notifications         - List sent notifs    â”‚
â”‚  â”œâ”€â”€ GET    /api/v1/notifications/:id     - Get notification    â”‚
â”‚  â”œâ”€â”€ WS     /ws                           - WebSocket endpoint  â”‚
â”‚  â”œâ”€â”€ GET    /health                       - Liveness check      â”‚
â”‚  â”œâ”€â”€ GET    /ready                        - Readiness check     â”‚
â”‚  â””â”€â”€ GET    /metrics                      - Prometheus metrics  â”‚
â”‚                                                                  â”‚
â”‚  METRICS EXPOSED:                                                â”‚
â”‚  â”œâ”€â”€ http_requests_total{method, endpoint, status}              â”‚
â”‚  â”œâ”€â”€ http_request_duration_seconds{method, endpoint}            â”‚
â”‚  â”œâ”€â”€ notifications_sent_total{type, status}                     â”‚
â”‚  â”œâ”€â”€ notification_queue_size                                     â”‚
â”‚  â”œâ”€â”€ websocket_connections_current                               â”‚
â”‚  â””â”€â”€ email_send_duration_seconds                                 â”‚
â”‚                                                                  â”‚
â”‚  DEPENDENCIES:                                                   â”‚
â”‚  â”œâ”€â”€ RabbitMQ (message consumer)                                 â”‚
â”‚  â””â”€â”€ Redis (rate limiting)                                       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Service Communication Patterns

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        COMMUNICATION PATTERNS                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  1. SYNCHRONOUS (REST API)                                                   â”‚
â”‚     Used for: Request-response patterns, real-time data needs               â”‚
â”‚                                                                               â”‚
â”‚     Frontend â”€â”€HTTPâ”€â”€â–º Order Service                                         â”‚
â”‚     Order Service â”€â”€HTTPâ”€â”€â–º Inventory Service (check stock)                  â”‚
â”‚     Order Service â”€â”€HTTPâ”€â”€â–º Payment Service (process payment)                â”‚
â”‚     Order Service â”€â”€HTTPâ”€â”€â–º User Service (validate user)                     â”‚
â”‚                                                                               â”‚
â”‚  2. ASYNCHRONOUS (Message Queue)                                             â”‚
â”‚     Used for: Event-driven, fire-and-forget, eventual consistency            â”‚
â”‚                                                                               â”‚
â”‚     Order Service â”€â”€publishâ”€â”€â–º RabbitMQ                                      â”‚
â”‚                                    â”‚                                          â”‚
â”‚                                    â”œâ”€â”€â–º Notification Service (order.created) â”‚
â”‚                                    â”œâ”€â”€â–º Inventory Service (order.confirmed)  â”‚
â”‚                                    â””â”€â”€â–º Analytics Service (future)           â”‚
â”‚                                                                               â”‚
â”‚  3. CACHING PATTERN                                                          â”‚
â”‚     Used for: Reduce database load, improve latency                          â”‚
â”‚                                                                               â”‚
â”‚     Service â”€â”€checkâ”€â”€â–º Redis Cache                                           â”‚
â”‚        â”‚                    â”‚                                                 â”‚
â”‚        â”‚               [if miss]                                              â”‚
â”‚        â”‚                    â”‚                                                 â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º PostgreSQL                                           â”‚
â”‚                             â”‚                                                 â”‚
â”‚                        [populate cache]                                       â”‚
â”‚                             â”‚                                                 â”‚
â”‚                             â–¼                                                 â”‚
â”‚                        Redis Cache                                           â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Data Flow Patterns

### 3.1 Order Creation Flow (Happy Path)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ORDER CREATION FLOW                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  1. User submits order from Frontend                                         â”‚
â”‚     â”‚                                                                        â”‚
â”‚     â–¼                                                                        â”‚
â”‚  2. Request hits Traefik (API Gateway)                                       â”‚
â”‚     â”‚  â”œâ”€â”€ Logs request                                                      â”‚
â”‚     â”‚  â”œâ”€â”€ Increments http_requests_total                                    â”‚
â”‚     â”‚  â””â”€â”€ Routes to Order Service                                           â”‚
â”‚     â”‚                                                                        â”‚
â”‚     â–¼                                                                        â”‚
â”‚  3. Order Service receives request                                           â”‚
â”‚     â”‚  â”œâ”€â”€ Validates request body                                            â”‚
â”‚     â”‚  â”œâ”€â”€ Starts transaction timer                                          â”‚
â”‚     â”‚  â””â”€â”€ Calls User Service to validate user                               â”‚
â”‚     â”‚                                                                        â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚     â”‚                                          â–¼                            â”‚
â”‚     â”‚  4. User Service validates JWT           â”‚                            â”‚
â”‚     â”‚     â”œâ”€â”€ Returns user data                â”‚                            â”‚
â”‚     â”‚     â””â”€â”€ Increments auth_validations      â”‚                            â”‚
â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚     â”‚                                                                        â”‚
â”‚     â”‚  5. Order Service calls Inventory Service                              â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚     â”‚                                          â–¼                            â”‚
â”‚     â”‚  6. Inventory Service checks stock       â”‚                            â”‚
â”‚     â”‚     â”œâ”€â”€ Checks Redis cache first         â”‚                            â”‚
â”‚     â”‚     â”œâ”€â”€ Falls back to PostgreSQL         â”‚                            â”‚
â”‚     â”‚     â”œâ”€â”€ Reserves stock if available      â”‚                            â”‚
â”‚     â”‚     â””â”€â”€ Returns reservation ID           â”‚                            â”‚
â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚     â”‚                                                                        â”‚
â”‚     â”‚  7. Order Service calls Payment Service                                â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚     â”‚                                          â–¼                            â”‚
â”‚     â”‚  8. Payment Service processes payment    â”‚                            â”‚
â”‚     â”‚     â”œâ”€â”€ Validates payment method         â”‚                            â”‚
â”‚     â”‚     â”œâ”€â”€ Calls mock payment gateway       â”‚                            â”‚
â”‚     â”‚     â”œâ”€â”€ Stores transaction               â”‚                            â”‚
â”‚     â”‚     â””â”€â”€ Returns payment confirmation     â”‚                            â”‚
â”‚     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚     â”‚                                                                        â”‚
â”‚     â–¼                                                                        â”‚
â”‚  9. Order Service finalizes order                                            â”‚
â”‚     â”œâ”€â”€ Saves order to PostgreSQL                                            â”‚
â”‚     â”œâ”€â”€ Updates order_created_total metric                                   â”‚
â”‚     â”œâ”€â”€ Records order_processing_duration                                    â”‚
â”‚     â””â”€â”€ Publishes event to RabbitMQ                                          â”‚
â”‚                      â”‚                                                       â”‚
â”‚                      â–¼                                                       â”‚
â”‚  10. RabbitMQ distributes event                                              â”‚
â”‚      â”‚                                                                       â”‚
â”‚      â””â”€â”€â–º Notification Service                                               â”‚
â”‚           â”œâ”€â”€ Consumes order.created event                                   â”‚
â”‚           â”œâ”€â”€ Sends confirmation email                                       â”‚
â”‚           â”œâ”€â”€ Updates notifications_sent_total                               â”‚
â”‚           â””â”€â”€ Pushes WebSocket update to Frontend                            â”‚
â”‚                                                                              â”‚
â”‚  11. Frontend receives WebSocket update                                      â”‚
â”‚      â””â”€â”€ Shows "Order confirmed" toast                                       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Metrics Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           METRICS FLOW                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  WEBAPP SERVER                          GRAFANA STACK VM                     â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”‚
â”‚  â”‚   Order Service     â”‚                                                    â”‚
â”‚  â”‚   GET /metrics      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚  â”‚   Port: 8001        â”‚             â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚                                      â”‚
â”‚                                      â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Inventory Service  â”‚             â”‚       â”‚     Prometheus      â”‚       â”‚
â”‚  â”‚   GET /metrics      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚                     â”‚       â”‚
â”‚  â”‚   Port: 8002        â”‚             â”‚       â”‚  Scrapes every 15s  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”œâ”€â”€â”€â”€â”€â”€â”€â”‚  from all targets   â”‚       â”‚
â”‚                                      â”‚       â”‚                     â”‚       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚       â”‚  Stores time-series â”‚       â”‚
â”‚  â”‚  Payment Service    â”‚             â”‚       â”‚  in local storage   â”‚       â”‚
â”‚  â”‚   GET /metrics      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚                     â”‚       â”‚
â”‚  â”‚   Port: 8003        â”‚             â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚                  â”‚                   â”‚
â”‚                                      â”‚                  â”‚ Query             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚                  â–¼                   â”‚
â”‚  â”‚   User Service      â”‚             â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ GET /actuator/prom  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚      Grafana        â”‚       â”‚
â”‚  â”‚   Port: 8004        â”‚             â”‚       â”‚                     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚       â”‚  Visualizes data    â”‚       â”‚
â”‚                                      â”‚       â”‚  in dashboards      â”‚       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚       â”‚                     â”‚       â”‚
â”‚  â”‚ Notification Serviceâ”‚             â”‚       â”‚  Runs alert rules   â”‚       â”‚
â”‚  â”‚   GET /metrics      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚                     â”‚       â”‚
â”‚  â”‚   Port: 8005        â”‚             â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚                                      â”‚
â”‚                                      â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚                                      â”‚
â”‚  â”‚   Node Exporter     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       SCRAPE TARGETS:               â”‚
â”‚  â”‚   Port: 9100        â”‚             â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚       - order-service:8001          â”‚
â”‚                                      â”‚       - inventory-service:8002       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚       - payment-service:8003         â”‚
â”‚  â”‚     cAdvisor        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       - user-service:8004            â”‚
â”‚  â”‚   Port: 8081        â”‚             â”‚       - notification-service:8005    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚       - node-exporter:9100           â”‚
â”‚                                      â”‚       - cadvisor:8081                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚       - postgres-exporter:9187       â”‚
â”‚  â”‚ postgres_exporter   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       - redis-exporter:9121          â”‚
â”‚  â”‚   Port: 9187        â”‚             â”‚       - traefik:8080                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚                                      â”‚
â”‚                                      â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚                                      â”‚
â”‚  â”‚  redis_exporter     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚  â”‚   Port: 9121        â”‚                                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Observability Architecture

### 4.1 Three Pillars of Observability

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     THREE PILLARS OF OBSERVABILITY                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                           1. METRICS                                    â”‚â”‚
â”‚  â”‚                         (Prometheus)                                    â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  WHAT: Numerical measurements over time                                 â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  TYPES:                                                                 â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚  â”‚   Counter   â”‚  â”‚    Gauge    â”‚  â”‚  Histogram  â”‚  â”‚   Summary   â”‚   â”‚â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚   â”‚â”‚
â”‚  â”‚  â”‚ Only goes   â”‚  â”‚ Can go up   â”‚  â”‚ Buckets of  â”‚  â”‚ Percentiles â”‚   â”‚â”‚
â”‚  â”‚  â”‚ up (resets  â”‚  â”‚ or down     â”‚  â”‚ values      â”‚  â”‚ calculated  â”‚   â”‚â”‚
â”‚  â”‚  â”‚ on restart) â”‚  â”‚             â”‚  â”‚             â”‚  â”‚ client-side â”‚   â”‚â”‚
â”‚  â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚   â”‚â”‚
â”‚  â”‚  â”‚ Example:    â”‚  â”‚ Example:    â”‚  â”‚ Example:    â”‚  â”‚ Example:    â”‚   â”‚â”‚
â”‚  â”‚  â”‚ requests    â”‚  â”‚ temperature â”‚  â”‚ latency     â”‚  â”‚ latency     â”‚   â”‚â”‚
â”‚  â”‚  â”‚ _total      â”‚  â”‚ CPU usage   â”‚  â”‚ buckets     â”‚  â”‚ quantiles   â”‚   â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  USE CASES:                                                             â”‚â”‚
â”‚  â”‚  â€¢ Request rate (requests per second)                                   â”‚â”‚
â”‚  â”‚  â€¢ Error rate (% of failed requests)                                    â”‚â”‚
â”‚  â”‚  â€¢ Latency distribution (p50, p95, p99)                                 â”‚â”‚
â”‚  â”‚  â€¢ Resource utilization (CPU, memory)                                   â”‚â”‚
â”‚  â”‚  â€¢ Business metrics (orders per hour)                                   â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                            2. LOGS                                      â”‚â”‚
â”‚  â”‚                            (Loki)                                       â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  WHAT: Timestamped, structured text records of events                   â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  FORMAT (Structured JSON):                                              â”‚â”‚
â”‚  â”‚  {                                                                      â”‚â”‚
â”‚  â”‚    "timestamp": "2024-01-15T10:30:00Z",                                â”‚â”‚
â”‚  â”‚    "level": "ERROR",                                                   â”‚â”‚
â”‚  â”‚    "service": "order-service",                                         â”‚â”‚
â”‚  â”‚    "trace_id": "abc123",                                               â”‚â”‚
â”‚  â”‚    "message": "Failed to process payment",                             â”‚â”‚
â”‚  â”‚    "order_id": "ORD-12345",                                            â”‚â”‚
â”‚  â”‚    "error": "Payment gateway timeout"                                  â”‚â”‚
â”‚  â”‚  }                                                                      â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  USE CASES:                                                             â”‚â”‚
â”‚  â”‚  â€¢ Debug specific errors                                                â”‚â”‚
â”‚  â”‚  â€¢ Audit trail (who did what)                                           â”‚â”‚
â”‚  â”‚  â€¢ Root cause analysis                                                  â”‚â”‚
â”‚  â”‚  â€¢ Correlate with traces                                                â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                           3. TRACES                                     â”‚â”‚
â”‚  â”‚                           (Tempo)                                       â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  WHAT: End-to-end request path across services                          â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  STRUCTURE:                                                             â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Trace ID: abc123                                                       â”‚â”‚
â”‚  â”‚  â”œâ”€â”€ Span: Frontend â†’ Traefik (2ms)                                    â”‚â”‚
â”‚  â”‚  â”‚   â””â”€â”€ Span: Traefik â†’ Order Service (1ms)                           â”‚â”‚
â”‚  â”‚  â”‚       â”œâ”€â”€ Span: Order â†’ User Service (5ms)                          â”‚â”‚
â”‚  â”‚  â”‚       â”œâ”€â”€ Span: Order â†’ Inventory Service (3ms)                     â”‚â”‚
â”‚  â”‚  â”‚       â”‚   â””â”€â”€ Span: Inventory â†’ PostgreSQL (2ms)                    â”‚â”‚
â”‚  â”‚  â”‚       â””â”€â”€ Span: Order â†’ Payment Service (50ms)                      â”‚â”‚
â”‚  â”‚  â”‚           â””â”€â”€ Span: Payment â†’ Gateway (45ms)  â† BOTTLENECK!         â”‚â”‚
â”‚  â”‚  â”‚                                                                      â”‚â”‚
â”‚  â”‚  USE CASES:                                                             â”‚â”‚
â”‚  â”‚  â€¢ Find latency bottlenecks                                             â”‚â”‚
â”‚  â”‚  â€¢ Understand service dependencies                                      â”‚â”‚
â”‚  â”‚  â€¢ Debug distributed failures                                           â”‚â”‚
â”‚  â”‚  â€¢ Optimize critical paths                                              â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                     CORRELATION (The Magic)                             â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  Metrics â†’ "Error rate spiked at 10:30"                                 â”‚â”‚
â”‚  â”‚              â”‚                                                          â”‚â”‚
â”‚  â”‚              â–¼                                                          â”‚â”‚
â”‚  â”‚  Logs    â†’ "Filter by time: 10:30, service: payment-service"            â”‚â”‚
â”‚  â”‚              â”‚                                                          â”‚â”‚
â”‚  â”‚              â–¼                                                          â”‚â”‚
â”‚  â”‚  Traces  â†’ "Click trace_id in log â†’ See full request path"              â”‚â”‚
â”‚  â”‚              â”‚                                                          â”‚â”‚
â”‚  â”‚              â–¼                                                          â”‚â”‚
â”‚  â”‚  Root Cause: "Payment gateway responded with 503 for 2 minutes"         â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Network Architecture

### 5.1 Docker Network Topology

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DOCKER NETWORK TOPOLOGY                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                        webapp-network (bridge)                          â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚    All containers communicate via container names (DNS)                 â”‚â”‚
â”‚  â”‚    Example: order-service can reach http://inventory-service:8002       â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚â”‚
â”‚  â”‚  â”‚ order   â”‚ â”‚inventoryâ”‚ â”‚ payment â”‚ â”‚  user   â”‚ â”‚ notif   â”‚          â”‚â”‚
â”‚  â”‚  â”‚ :8001   â”‚ â”‚ :8002   â”‚ â”‚ :8003   â”‚ â”‚ :8004   â”‚ â”‚ :8005   â”‚          â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â”‚â”‚
â”‚  â”‚       â”‚           â”‚           â”‚           â”‚           â”‚                â”‚â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚â”‚
â”‚  â”‚                               â”‚                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚â”‚
â”‚  â”‚  â”‚postgres â”‚ â”‚  redis  â”‚ â”‚rabbitmq â”‚ â”‚ traefik â”‚ â”‚frontend â”‚          â”‚â”‚
â”‚  â”‚  â”‚ :5432   â”‚ â”‚ :6379   â”‚ â”‚ :5672   â”‚ â”‚ :80     â”‚ â”‚ :3000   â”‚          â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚â”‚
â”‚  â”‚                                           â”‚                            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                              â”‚                              â”‚
â”‚  EXPOSED PORTS (Host â†” Container):           â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                           â”‚                            â”‚â”‚
â”‚  â”‚  Host Port    Container         Purpose   â”‚                            â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€   â”‚                            â”‚â”‚
â”‚  â”‚  80      â†’    traefik:80        HTTP      â”‚                            â”‚â”‚
â”‚  â”‚  3000    â†’    frontend:3000     UI        â”‚                            â”‚â”‚
â”‚  â”‚  8080    â†’    traefik:8080      Dashboard â”‚                            â”‚â”‚
â”‚  â”‚  5432    â†’    postgres:5432     DB access â”‚                            â”‚â”‚
â”‚  â”‚  6379    â†’    redis:6379        Cache     â”‚                            â”‚â”‚
â”‚  â”‚  9100    â†’    node-exporter     Metrics   â”œâ”€â”€â–º Scraped by Prometheus   â”‚â”‚
â”‚  â”‚  8081    â†’    cadvisor          Metrics   â”‚    on Grafana VM           â”‚â”‚
â”‚  â”‚  9187    â†’    postgres-export   Metrics   â”‚                            â”‚â”‚
â”‚  â”‚  9121    â†’    redis-exporter    Metrics   â”‚                            â”‚â”‚
â”‚  â”‚                                           â”‚                            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Cross-VM Communication

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CROSS-VM COMMUNICATION                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   WEBAPP VM (192.168.1.10)              GRAFANA VM (192.168.1.20)           â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚                     â”‚               â”‚                     â”‚             â”‚
â”‚   â”‚  Services expose    â”‚â—„â”€â”€â”€â”€ PULL â”€â”€â”€â”€â”‚    Prometheus       â”‚             â”‚
â”‚   â”‚  /metrics on ports  â”‚  (every 15s)  â”‚    scrape targets:  â”‚             â”‚
â”‚   â”‚                     â”‚               â”‚                     â”‚             â”‚
â”‚   â”‚  â€¢ :8001            â”‚               â”‚  - 192.168.1.10:8001â”‚             â”‚
â”‚   â”‚  â€¢ :8002            â”‚               â”‚  - 192.168.1.10:8002â”‚             â”‚
â”‚   â”‚  â€¢ :8003            â”‚               â”‚  - 192.168.1.10:8003â”‚             â”‚
â”‚   â”‚  â€¢ :8004            â”‚               â”‚  - 192.168.1.10:8004â”‚             â”‚
â”‚   â”‚  â€¢ :8005            â”‚               â”‚  - 192.168.1.10:8005â”‚             â”‚
â”‚   â”‚  â€¢ :9100            â”‚               â”‚  - 192.168.1.10:9100â”‚             â”‚
â”‚   â”‚  â€¢ :8081            â”‚               â”‚  - 192.168.1.10:8081â”‚             â”‚
â”‚   â”‚                     â”‚               â”‚                     â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚                     â”‚               â”‚                     â”‚             â”‚
â”‚   â”‚     Promtail        â”‚â”€â”€â”€â”€ PUSH â”€â”€â”€â”€â–ºâ”‚        Loki         â”‚             â”‚
â”‚   â”‚                     â”‚  (HTTP POST)  â”‚      :3100          â”‚             â”‚
â”‚   â”‚  Reads Docker logs  â”‚               â”‚                     â”‚             â”‚
â”‚   â”‚  Ships to Loki      â”‚               â”‚                     â”‚             â”‚
â”‚   â”‚                     â”‚               â”‚                     â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚                     â”‚               â”‚                     â”‚             â”‚
â”‚   â”‚  OTEL Collector     â”‚â”€â”€â”€â”€ PUSH â”€â”€â”€â”€â–ºâ”‚       Tempo         â”‚             â”‚
â”‚   â”‚  (optional)         â”‚   (gRPC)      â”‚      :4317          â”‚             â”‚
â”‚   â”‚                     â”‚               â”‚                     â”‚             â”‚
â”‚   â”‚  Collects traces    â”‚               â”‚                     â”‚             â”‚
â”‚   â”‚  from all services  â”‚               â”‚                     â”‚             â”‚
â”‚   â”‚                     â”‚               â”‚                     â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                              â”‚
â”‚   FIREWALL REQUIREMENTS:                                                     â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚   Webapp VM â†’ Grafana VM:                                                   â”‚
â”‚     â€¢ TCP 3100 (Loki - log push)                                            â”‚
â”‚     â€¢ TCP 4317 (Tempo - trace push, if using OTEL)                          â”‚
â”‚                                                                              â”‚
â”‚   Grafana VM â†’ Webapp VM:                                                   â”‚
â”‚     â€¢ TCP 8001-8005 (service metrics)                                       â”‚
â”‚     â€¢ TCP 9100 (node exporter)                                              â”‚
â”‚     â€¢ TCP 8081 (cAdvisor)                                                   â”‚
â”‚     â€¢ TCP 9187 (postgres exporter)                                          â”‚
â”‚     â€¢ TCP 9121 (redis exporter)                                             â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Security Considerations

### 6.1 Production Security Checklist

| Layer | Security Measure | Status in Lab |
|-------|-----------------|---------------|
| Network | Firewall rules between VMs | âš ï¸ Configure |
| Network | HTTPS/TLS for all traffic | âš ï¸ Optional |
| API | JWT authentication | âœ… Implemented |
| API | Rate limiting | âœ… Via Traefik |
| Database | Non-root users | âœ… Configured |
| Database | Encrypted connections | âš ï¸ Optional |
| Secrets | Environment variables | âœ… .env file |
| Secrets | Secret manager integration | âš ï¸ Not in lab |
| Containers | Non-root users | âœ… Configured |
| Monitoring | Metrics endpoints protected | âš ï¸ Open for lab |

### 6.2 Lab vs Production Differences

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Aspect             â”‚ Lab Setup              â”‚ Production Requirement      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Metrics endpoints  â”‚ Open (no auth)         â”‚ Behind auth or VPN         â”‚
â”‚ Database password  â”‚ In .env file           â”‚ In secret manager          â”‚
â”‚ TLS certificates   â”‚ Self-signed or none    â”‚ Proper CA certificates     â”‚
â”‚ API Gateway        â”‚ Basic routing          â”‚ WAF, DDoS protection       â”‚
â”‚ Logging            â”‚ All levels             â”‚ Filtered PII               â”‚
â”‚ Alerting           â”‚ Email/Slack demo       â”‚ PagerDuty, on-call         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Scaling Patterns

### 7.1 Horizontal Scaling

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       HORIZONTAL SCALING PATTERN                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  BEFORE (Single Instance):                                                   â”‚
â”‚                                                                              â”‚
â”‚  Traefik â”€â”€â–º order-service (1 instance)                                     â”‚
â”‚                                                                              â”‚
â”‚  AFTER (Scaled):                                                             â”‚
â”‚                                                                              â”‚
â”‚  Traefik â”€â”€â”¬â”€â”€â–º order-service-1                                             â”‚
â”‚            â”œâ”€â”€â–º order-service-2                                             â”‚
â”‚            â””â”€â”€â–º order-service-3                                             â”‚
â”‚                                                                              â”‚
â”‚  SCALING COMMAND:                                                            â”‚
â”‚  docker compose up -d --scale order-service=3                                â”‚
â”‚                                                                              â”‚
â”‚  METRICS IMPACT:                                                             â”‚
â”‚  â€¢ Each instance has unique container ID label                               â”‚
â”‚  â€¢ sum(rate(requests_total[5m])) aggregates all instances                   â”‚
â”‚  â€¢ Can track per-instance performance                                        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Technology Choices Explained

### 8.1 Why These Languages?

| Language | Service | Reasoning |
|----------|---------|-----------|
| **Go** | Order | Fast compilation, excellent concurrency, small binaries |
| **Rust** | Inventory | Memory safety, zero-cost abstractions, high performance |
| **Python** | Payment | Rapid development, rich ecosystem for integrations |
| **Java** | User | Enterprise standard, mature security frameworks |
| **Node.js** | Notification | Event loop perfect for I/O, great for real-time |
| **TypeScript** | Frontend | Type safety, excellent React ecosystem |

### 8.2 Why These Frameworks?

| Framework | Language | Why Chosen |
|-----------|----------|------------|
| **Gin** | Go | Fastest Go web framework, minimal overhead |
| **Axum** | Rust | Modern, tokio-native, great ergonomics |
| **FastAPI** | Python | Async, auto OpenAPI docs, Pydantic validation |
| **Spring Boot** | Java | Industry standard, comprehensive ecosystem |
| **Express** | Node.js | Simple, widely understood, flexible |
| **Next.js** | TypeScript | SSR/SSG, file-based routing, React ecosystem |

---

## ğŸ“š Further Reading

- [Prometheus Best Practices](https://prometheus.io/docs/practices/)
- [Grafana Loki Documentation](https://grafana.com/docs/loki/latest/)
- [OpenTelemetry Concepts](https://opentelemetry.io/docs/concepts/)
- [12-Factor App Methodology](https://12factor.net/)
- [Microservices Patterns by Chris Richardson](https://microservices.io/patterns/)

---

**Next: [DEPLOYMENT.md](./DEPLOYMENT.md)** - Step-by-step deployment guide
