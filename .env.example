# =============================================================================
# ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and update the values for your environment
# Command: cp .env.example .env
# =============================================================================

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================
# PostgreSQL is used as the primary database for all microservices
# Each service has its own schema but shares the same database instance
# 
# SECURITY NOTE: In production, use a strong password and consider
# using a secret manager instead of environment variables
# -----------------------------------------------------------------------------
POSTGRES_USER=webapp
POSTGRES_PASSWORD=webapp_secure_password_2024
POSTGRES_DB=orderdb
POSTGRES_PORT=5432

# =============================================================================
# CACHE CONFIGURATION (Redis)
# =============================================================================
# Redis is used for:
# - Session caching
# - API response caching
# - Rate limiting counters
# - Real-time stock level caching
# -----------------------------------------------------------------------------
REDIS_PASSWORD=redis_secure_password_2024
REDIS_PORT=6379

# =============================================================================
# MESSAGE QUEUE CONFIGURATION (RabbitMQ)
# =============================================================================
# RabbitMQ handles asynchronous communication between services:
# - Order events (order.created, order.updated, order.cancelled)
# - Notification triggers
# - Inventory updates
# -----------------------------------------------------------------------------
RABBITMQ_USER=webapp
RABBITMQ_PASSWORD=rabbitmq_secure_password_2024
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT_SECRET: Used for signing and verifying JWT tokens
# - Must be at least 32 characters
# - Should be cryptographically random
# - Generate with: openssl rand -base64 32
# -----------------------------------------------------------------------------
JWT_SECRET=your_super_secret_jwt_key_at_least_32_characters_long

# =============================================================================
# GRAFANA STACK CONFIGURATION
# =============================================================================
# Configure these to point to your Grafana Stack VM
# These URLs are used by Promtail (log shipping) and OTEL (tracing)
#
# LOKI_URL: Where to send logs
# TEMPO_URL: Where to send traces (OTLP gRPC endpoint)
# -----------------------------------------------------------------------------
LOKI_URL=http://192.168.1.20:3100
TEMPO_URL=http://192.168.1.20:4317

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
# NODE_ENV: Application environment (development, production, test)
# LOG_LEVEL: Logging verbosity (debug, info, warn, error)
# -----------------------------------------------------------------------------
NODE_ENV=production
LOG_LEVEL=info

# =============================================================================
# SERVICE PORTS
# =============================================================================
# These are the ports each microservice listens on
# You typically don't need to change these unless you have port conflicts
# -----------------------------------------------------------------------------
ORDER_SERVICE_PORT=8001
INVENTORY_SERVICE_PORT=8002
PAYMENT_SERVICE_PORT=8003
USER_SERVICE_PORT=8004
NOTIFICATION_SERVICE_PORT=8005
FRONTEND_PORT=3000

# =============================================================================
# TRAEFIK CONFIGURATION
# =============================================================================
# Traefik is the API Gateway that routes traffic to microservices
# HTTP_PORT: Main HTTP entry point
# DASHBOARD_PORT: Traefik dashboard and metrics
# -----------------------------------------------------------------------------
TRAEFIK_HTTP_PORT=80
TRAEFIK_DASHBOARD_PORT=8080

# =============================================================================
# EXPORTER PORTS (for Prometheus scraping)
# =============================================================================
# These exporters expose metrics in Prometheus format
# NODE_EXPORTER: Host OS metrics (CPU, memory, disk, network)
# CADVISOR: Container metrics (per-container resource usage)
# POSTGRES_EXPORTER: PostgreSQL metrics
# REDIS_EXPORTER: Redis metrics
# -----------------------------------------------------------------------------
NODE_EXPORTER_PORT=9100
CADVISOR_PORT=8081
POSTGRES_EXPORTER_PORT=9187
REDIS_EXPORTER_PORT=9121
